#!/usr/bin/env python
import argparse

from lib.version import version

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="A simple dotfile management tool")

    sub_parser = parser.add_subparsers(help="Command to run", dest="action")
    version_parser = sub_parser.add_parser("version", help="Display version")

    help_parser = sub_parser.add_parser("help", help="Display help")
    help_parser.add_argument("command", help="Command to display help for")

    args = parser.parse_args()

    if not args.action:
        parser.print_help()

    if args.action == "version":
        print(version())

    if args.action == "help":
        cmd = args.command

        if cmd not in sub_parser.choices:
            print("Invalid command, try again")
            exit(1)

        if cmd == "version":
            version_parser.print_help()
        if cmd == "help":
            help_parser.print_help()
